# Idea

### Режимы работы библиотеки:

- [x] На вход ей подается текст и на выход получаем фонемы (разные прочтения)
- [x] На вход подаем фонемы двух типов и получаем их разницу
- [ ] Мы подаем текст/фонемы и логиты (вероятности каждой фонемы в каждом звуковом окне) и получаем транскрипцию

### Хотим учесть:

- [x] функции для работы с фонемами - трансляция 61-48-39, one-letter-encoding, diff функции и подсчет операций
- [x] витерби для третьего режима
- [x] эвристики для разговорной речи (connected speech)
- [ ] эвристики про похожие звуки
- [x] сравнение с фонемами тимита
- [x] разные варианты произношения слова
- [x] учитывать contractions (I'm, you're, he's, she's, we're, aren't, can't, would've, we've)
- [ ] учитывать contractions сложного порядка (I'd not <-> I couldn't)
- [ ] генерализовать contractions на слова: Alex would -> Alex'd
- [ ] добавить эвристику о принадлежности - Alex's gloves, James' gloves
- [ ] добавить метки в ноды графа о характере ноды - оригинальное произношение,
  эвристика (в том числе какая), контракшн

На будущее:
- [ ] сравнить с https://github.com/bootphon/phonemizer на различных бэкендах - используют ли они тоже cmudict внутри или какой-то свой фонемайзер
- [ ] ударения - как отдельных слов так и целиком в предложении
- [ ] поддержка незнакомых слов и разных словарных форм
- [ ] улучшить токенайзер для преобразования текста - надо учитывать разницу например между I will/I'll
- [ ] сохранять информацию об операциях с транскрипциями cmu, чтобы объяснить человеку почему мы сравниваем не со словарем

Проверили:
- [x] lextool (для преобразования незнакомых слов) по умолчанию скомпилирован только под 32бит
-

### Начальные статы сравнения транскрипций словарных с тимитом:

```
{'25%': 0.17241379310344829, '50%': 0.23076923076923078, '75%': 0.29629629629629628, '95%': 0.40000000000000002}
```

### После добавления разных вариантов произношения из cmudict:

```
{'25%': 0.1388888888888889, '50%': 0.1951219512195122, '75%': 0.25, '95%': 0.34782608695652173}
```

### После добавления remove_doubles:

```
{'25%': 0.13333333333333333, '50%': 0.19230769230769232, '75%': 0.25, '95%': 0.34615384615384615}
```

### После добавления эвристики assimilate:

```
{'25%': 0.12903225806451613, '50%': 0.1875, '75%': 0.25, '95%': 0.33333333333333331}
{'25%': 0.12820512820512819, '50%': 0.18518518518518517, '75%': 0.23999999999999999, '95%': 0.33333333333333331}
```

### После перехода на графы:
```
{'25%': 0.10714285714285714, '50%': 0.15384615384615385, '75%': 0.20689655172413793, '95%': 0.28244147157190624}
```

### После добавления of+consonants:
```
{'25%': 0.10714285714285714, '50%': 0.15384615384615385, '75%': 0.2063894523326572, '95%': 0.28125}
```

### После добавления i+vowel:
```
{'25%': 0.10638297872340426, '50%': 0.15384615384615385, '75%': 0.20588235294117646, '95%': 0.28125}
```

### После добавления u+vowel:
```
{'25%': 0.10526315789473684, '50%': 0.15384615384615385, '75%': 0.20588235294117646, '95%': 0.28087499999999976}
```

### После перехода на cmu_cer:
```
{'25%': 0.0967741935483871, '50%': 0.14285714285714285, '75%': 0.1891891891891892, '95%': 0.2647058823529412, 'mean': 0.14459779906412198}
```

### Добавлены простые contractions
```
{'25%': 0.0967741935483871, '50%': 0.14285714285714285, '75%': 0.1875, '95%': 0.2647058823529412, 'mean': 0.14415930452619266}
```

### Самые возможные confusions
```
{'25%': 0.08571428571428572, '50%': 0.125, '75%': 0.16666666666666666, '95%': 0.23333333333333334, 'mean': 0.12724517834459126}
```

### Contractions без confusions
```
```

### Contractions with confusions
```
```